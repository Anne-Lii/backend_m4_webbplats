document.addEventListener("DOMContentLoaded",()=>{let e="https://backend-m4-api.onrender.com/api",t=document.getElementById("registerForm"),n=document.getElementById("registerMessage");t&&t.addEventListener("submit",async function(t){t.preventDefault();let o=document.getElementById("usernameReg").value,a=document.getElementById("passwordReg").value,d=document.getElementById("emailReg").value;try{let t=await fetch(e+"/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:a,email:d})});if(t.ok)n.textContent="Användare registrerad!",document.getElementById("usernameReg").value="",document.getElementById("passwordReg").value="",document.getElementById("emailReg").value="";else{let e=await t.json();n.textContent=e.error}}catch(e){console.error("Registreringsfel:",e),n.textContent="Ett fel inträffade vid registreringen. Försök igen senare."}});let o=document.getElementById("loginForm"),a=document.getElementById("loginMessage");o&&o.addEventListener("submit",async function(t){t.preventDefault(),document.getElementById("loadingMessage").innerText="Loading";let n=document.getElementById("username").value,o=document.getElementById("password").value;try{let t=await fetch(e+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:o})});if(document.getElementById("loadingMessage").innerText="Loading.",setTimeout(()=>{document.getElementById("loadingMessage").innerText="Loading.."},500),setTimeout(()=>{document.getElementById("loadingMessage").innerText="Loading..."},1e3),t.ok){let e=(await t.json()).response.token;localStorage.setItem("token",e),a.innerHTML="",localStorage.getItem("token")?window.location.replace("mypages.html"):a.textContent="Ogiltig JWT"}else{let e=await t.json();a.textContent=e.error}}catch(e){console.error("Inloggningsfel:",e),a.textContent="Ett fel inträffade vid inloggningen. Försök igen senare."}});let d=document.getElementById("logoutBtn");d&&d.addEventListener("click",()=>{localStorage.removeItem("token"),window.location.href="index.html"})});
//# sourceMappingURL=index.0928312d.js.map
